@inject IJSRuntime JSRuntime
@implements IAsyncDisposable

<div id="@ContainerId" style="width: 100%; height: 400px; border-radius: 8px; overflow: hidden; background-color: #333;"></div>

@code {
    [Parameter] public string ContainerId { get; set; } = "threeContainer_" + Guid.NewGuid().ToString("N");

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("threeHelpers.initialize", ContainerId);
        }
    }
    
    public async Task UpdateGeometryAsync(float[] vertices, int[] indices = null)
    {
        await JSRuntime.InvokeVoidAsync("threeHelpers.updateGeometry", vertices, indices);
    }

    public async ValueTask DisposeAsync()
    {
        // await JSRuntime.InvokeVoidAsync("threeHelpers.dispose");
    }
}
